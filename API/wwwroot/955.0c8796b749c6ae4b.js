"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[955],{7955:(st,A,s)=>{s.r(A),s.d(A,{AdminModule:()=>h});var a=s(6895),F=s(4823),g=s(9838),t=s(1571),y=s(5085),U=s(2340),Z=s(529);class u{constructor(o){this.http=o,this.baseUrl=U.N.apiUrl}createProduct(o){return this.http.post(this.baseUrl+"products",o)}updateProduct(o,e){return this.http.put(this.baseUrl+"products/"+e,o)}deleteProduct(o){return this.http.delete(this.baseUrl+"products/"+o)}uploadImage(o,e){const i=new FormData;return i.append("photo",o,"image.png"),this.http.put(this.baseUrl+"products/"+e+"/photo",i,{reportProgress:!0,observe:"events"})}deleteProductPhoto(o,e){return this.http.delete(this.baseUrl+"products/"+e+"/photo/"+o)}setMainPhoto(o,e){return this.http.post(this.baseUrl+"products/"+e+"/photo/"+o,{})}}function J(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1,"Showing "),t.TgZ(2,"strong"),t._uU(3),t.qZA(),t._uU(4," of "),t.TgZ(5,"strong"),t._uU(6),t.qZA(),t._uU(7," Results"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.AsE(" ",(e.pageNumber-1)*e.pageSize+1," - ",e.pageNumber*e.pageSize>e.totalCount?e.totalCount:e.pageNumber*e.pageSize," "),t.xp6(3),t.Oqu(e.totalCount)}}function N(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"There are "),t.TgZ(2,"strong"),t._uU(3,"0"),t.qZA(),t._uU(4," results for this filter"),t.qZA())}function S(n,o){if(1&n&&(t.TgZ(0,"header"),t.YNc(1,J,8,3,"span",0),t.YNc(2,N,5,0,"span",0),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.totalCount>0),t.xp6(1),t.Q6J("ngIf",0===e.totalCount)}}u.\u0275fac=function(o){return new(o||u)(t.LFG(Z.eN))},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});class _{}_.\u0275fac=function(o){return new(o||_)},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-paging-header"]],inputs:{pageNumber:"pageNumber",pageSize:"pageSize",totalCount:"totalCount"},decls:1,vars:1,consts:[[4,"ngIf"]],template:function(o,e){1&o&&t.YNc(0,S,3,2,"header",0),2&o&&t.Q6J("ngIf",e.totalCount&&e.pageNumber&&e.pageSize)},dependencies:[a.O5]});var I=s(2521),c=s(4006);function E(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"pagination",1),t.NdJ("pageChanged",function(r){t.CHM(e);const d=t.oxw();return t.KtG(d.onPagerChanged(r))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("boundaryLinks",!0)("totalItems",e.totalCount)("itemsPerPage",e.pageSize)("maxSize",10)("ngModel",e.pageNumber)}}class f{constructor(){this.pageChanged=new t.vpe}onPagerChanged(o){this.pageChanged.emit(o.page)}}f.\u0275fac=function(o){return new(o||f)},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-pager"]],inputs:{totalCount:"totalCount",pageSize:"pageSize",pageNumber:"pageNumber"},outputs:{pageChanged:"pageChanged"},decls:1,vars:1,consts:[["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"boundaryLinks","totalItems","itemsPerPage","maxSize","ngModel","pageChanged",4,"ngIf"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"boundaryLinks","totalItems","itemsPerPage","maxSize","ngModel","pageChanged"]],template:function(o,e){1&o&&t.YNc(0,E,1,5,"pagination",0),2&o&&t.Q6J("ngIf",e.totalCount&&e.pageSize)},dependencies:[a.O5,I.Qt,c.JJ,c.On]});const w=function(n){return["edit",n]};function Q(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td",18),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",12),t._UZ(5,"img",19),t.qZA()(),t.TgZ(6,"th",18)(7,"h5"),t._uU(8),t.qZA()(),t.TgZ(9,"td",18),t._uU(10),t.ALo(11,"currency"),t.qZA(),t.TgZ(12,"td",18)(13,"button",20),t._uU(14,"Edit"),t.qZA()(),t.TgZ(15,"td",18)(16,"button",21),t.NdJ("click",function(){const d=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.deleteProduct(d.id))}),t._uU(17,"Delete"),t.qZA()()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.id),t.xp6(3),t.s9C("src",e.pictureUrl||"/assets/images/placeholder.png",t.LSH),t.s9C("alt",e.name),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.Oqu(t.lcZ(11,6,e.price)),t.xp6(3),t.Q6J("routerLink",t.VKq(8,w,e.id))}}function Y(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",22)(1,"app-pager",23),t.NdJ("pageChanged",function(r){t.CHM(e);const d=t.oxw(2);return t.KtG(d.onPageChanged(r))}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("pageSize",e.shopParams.pageSize)("pageNumber",e.shopParams.pageNumber)("totalCount",e.totalCount)}}const z=function(){return["/admin/create"]};function O(n,o){if(1&n&&(t.TgZ(0,"section",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"header",6),t._uU(6,"Product List"),t.qZA(),t.TgZ(7,"button",7),t._uU(8,"Create new product"),t.qZA()(),t._UZ(9,"app-paging-header",8),t.TgZ(10,"div",9)(11,"table",10)(12,"thead")(13,"tr")(14,"th",11)(15,"div",12),t._uU(16,"Id"),t.qZA()(),t.TgZ(17,"th",11)(18,"div",13),t._uU(19,"Product"),t.qZA()(),t.TgZ(20,"th",11)(21,"div",14),t._uU(22,"Name"),t.qZA()(),t.TgZ(23,"th",11)(24,"div",15),t._uU(25,"Price"),t.qZA()(),t.TgZ(26,"th",11)(27,"div",15),t._uU(28,"Edit"),t.qZA()(),t.TgZ(29,"th",11)(30,"div",15),t._uU(31,"Delete"),t.qZA()()()(),t.TgZ(32,"tbody"),t.YNc(33,Q,18,10,"tr",16),t.qZA()()(),t.YNc(34,Y,2,3,"div",17),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(7),t.Q6J("routerLink",t.DdM(6,z)),t.xp6(2),t.Q6J("totalCount",e.totalCount)("pageSize",e.shopParams.pageSize)("pageNumber",e.shopParams.pageNumber),t.xp6(24),t.Q6J("ngForOf",e.products),t.xp6(1),t.Q6J("ngIf",e.totalCount>0)}}class v{constructor(o,e){this.shopService=o,this.adminService=e,this.shopParams=this.shopService.getShopParams()}ngOnInit(){this.getProducts()}getProducts(o=!1){this.shopService.getProducts(o).subscribe(e=>{this.products=e.data,this.totalCount=e.count},e=>{console.log(e)})}onPageChanged(o){const e=this.shopService.getShopParams();e.pageNumber!==o&&(e.pageNumber=o,this.shopService.setShopParams(e),this.getProducts(!0))}deleteProduct(o){this.adminService.deleteProduct(o).subscribe(e=>{this.products.splice(this.products.findIndex(i=>i.id===o),1),this.totalCount--})}}v.\u0275fac=function(o){return new(o||v)(t.Y36(y.d),t.Y36(u))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-admin"]],decls:1,vars:1,consts:[["class","admin-page",4,"ngIf"],[1,"admin-page"],[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"d-flex","justify-content-between","my-3"],[1,"h2"],[1,"btn","btn-outline-success",3,"routerLink"],[3,"totalCount","pageSize","pageNumber"],[1,"table-responsive"],[1,"table"],["scope","col"],[1,"p-2"],[1,"p-2","text-uppercase"],[1,"py-2","text-uppercase"],[1,"p-2","px-3","text-uppercase"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"align-middle"],[1,"img-fluid",2,"max-height","50px",3,"src","alt"],[1,"btn","btn-warning",3,"routerLink"],[1,"btn","btn-danger",3,"click"],[1,"d-flex","justify-content-center"],[3,"pageSize","pageNumber","totalCount","pageChanged"]],template:function(o,e){1&o&&t.YNc(0,O,35,7,"section",0),2&o&&t.Q6J("ngIf",e.products)},dependencies:[a.sg,a.O5,_,f,g.rH,a.H9]});class k{constructor(o){this.name="",this.description="",this.pictureUrl="",Object.assign(this,o)}}var B=s(4128),M=s(9241),H=s(769);function L(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1," Product Name is required "),t.qZA())}function K(n,o){if(1&n&&(t.TgZ(0,"div",21),t.YNc(1,L,2,0,"div",22),t.qZA()),2&n){t.oxw();const e=t.MAs(7);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function V(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1," Product price is required "),t.qZA())}function G(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1," Product price needs to be decimal value "),t.qZA())}function j(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1," Product price must be greater than zero "),t.qZA())}function R(n,o){if(1&n&&(t.TgZ(0,"div",21),t.YNc(1,V,2,0,"div",22),t.YNc(2,G,2,0,"div",22),t.YNc(3,j,2,0,"div",22),t.qZA()),2&n){t.oxw();const e=t.MAs(13);t.xp6(1),t.Q6J("ngIf",e.errors.required),t.xp6(1),t.Q6J("ngIf",e.errors.pattern),t.xp6(1),t.Q6J("ngIf",e.errors.min)}}function W(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1," Product price is required "),t.qZA())}function $(n,o){if(1&n&&(t.TgZ(0,"div",21),t.YNc(1,W,2,0,"div",22),t.qZA()),2&n){t.oxw();const e=t.MAs(21);t.xp6(1),t.Q6J("ngIf",e.errors.required)}}function D(n,o){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&n){const e=o.$implicit,i=t.oxw();t.Q6J("selected",i.product.productBrandId===e.id)("ngValue",e.id),t.xp6(1),t.Oqu(e.name)}}function X(n,o){if(1&n&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&n){const e=o.$implicit,i=t.oxw();t.Q6J("selected",i.product.productTypeId===e.id)("ngValue",e.id),t.xp6(1),t.Oqu(e.name)}}const x=function(n){return{"is-invalid":n}};class C{constructor(o,e,i){this.route=o,this.adminService=e,this.router=i}ngOnInit(){}onSubmit(o){if("edit"===this.route.snapshot.url[0].path){const e={...this.product,...o,price:+o.price};this.adminService.updateProduct(e,+this.route.snapshot.paramMap.get("id")).subscribe(i=>{this.router.navigate(["/admin"])})}else{const e={...o,price:+o.price};this.adminService.createProduct(e).subscribe(i=>{this.router.navigate(["/admin"])})}}updatePrice(o){this.product.price=o}}C.\u0275fac=function(o){return new(o||C)(t.Y36(g.gz),t.Y36(u),t.Y36(g.F0))},C.\u0275cmp=t.Xpm({type:C,selectors:[["app-edit-product-form"]],inputs:{product:"product",brands:"brands",types:"types"},decls:36,vars:24,consts:[[3,"ngSubmit"],["productForm","ngForm"],[1,"form-row"],[1,"form-group","col-md-6"],["for","name"],["required","","type","text","id","name","placeholder","Product Name","name","name",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["name","ngModel"],["class","invalid-feedback",4,"ngIf"],["for","price"],["required","","type","text","id","price","placeholder","Price","currencyMask","","name","price","pattern","^\\$?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(\\.[0-9][0-9])?$",1,"form-control",3,"ngClass","min","ngModel","ngModelChange"],["price","ngModel"],[1,"form-group","col-md-12"],["for","description"],["required","","id","description","name","description","rows","3",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["description","ngModel"],["for","brand"],["id","brand","name","productBrandId","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"selected","ngValue",4,"ngFor","ngForOf"],["for","type"],["id","type","name","productTypeId","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","my-3","float-right",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"],[3,"selected","ngValue"]],template:function(o,e){if(1&o){const i=t.EpF();t.TgZ(0,"form",0,1),t.NdJ("ngSubmit",function(){t.CHM(i);const d=t.MAs(1);return t.KtG(e.onSubmit(d.valid&&d.value))}),t.TgZ(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5,"Product Name"),t.qZA(),t.TgZ(6,"input",5,6),t.NdJ("ngModelChange",function(d){return e.product.name=d}),t.qZA(),t.YNc(8,K,2,1,"div",7),t.qZA(),t.TgZ(9,"div",3)(10,"label",8),t._uU(11,"Price"),t.qZA(),t.TgZ(12,"input",9,10),t.NdJ("ngModelChange",function(d){return e.updatePrice(+d)}),t.ALo(14,"number"),t.qZA(),t.YNc(15,R,4,3,"div",7),t.qZA()(),t.TgZ(16,"div",2)(17,"div",11)(18,"label",12),t._uU(19,"Description"),t.qZA(),t.TgZ(20,"textarea",13,14),t.NdJ("ngModelChange",function(d){return e.product.description=d}),t.qZA(),t.YNc(22,$,2,1,"div",7),t.qZA()(),t.TgZ(23,"div",2)(24,"div",3)(25,"label",15),t._uU(26,"Brand"),t.qZA(),t.TgZ(27,"select",16),t.NdJ("ngModelChange",function(d){return e.product.productBrandId=d}),t.YNc(28,D,2,3,"option",17),t.qZA()(),t.TgZ(29,"div",3)(30,"label",18),t._uU(31,"Type"),t.qZA(),t.TgZ(32,"select",19),t.NdJ("ngModelChange",function(d){return e.product.productTypeId=d}),t.YNc(33,X,2,3,"option",17),t.qZA()()(),t.TgZ(34,"button",20),t._uU(35,"Submit"),t.qZA()()}if(2&o){const i=t.MAs(1),r=t.MAs(7),d=t.MAs(13),p=t.MAs(21);t.xp6(6),t.Q6J("ngClass",t.VKq(18,x,r.invalid&&(r.dirty||r.touched)))("ngModel",e.product.name),t.xp6(2),t.Q6J("ngIf",r.invalid&&(r.dirty||r.touched)),t.xp6(4),t.Q6J("ngClass",t.VKq(20,x,d.invalid&&(d.dirty||d.touched)))("min",.01)("ngModel",t.xi3(14,15,+e.product.price,"1.2-2")),t.xp6(3),t.Q6J("ngIf",d.invalid&&(d.dirty||d.touched)),t.xp6(5),t.Q6J("ngClass",t.VKq(22,x,p.invalid&&(p.dirty||p.touched)))("ngModel",e.product.description),t.xp6(2),t.Q6J("ngIf",p.invalid&&(p.dirty||p.touched)),t.xp6(5),t.Q6J("ngModel",e.product.productBrandId),t.xp6(1),t.Q6J("ngForOf",e.brands),t.xp6(4),t.Q6J("ngModel",e.product.productTypeId),t.xp6(1),t.Q6J("ngForOf",e.types),t.xp6(1),t.Q6J("disabled",!i.valid)}},dependencies:[a.mk,a.sg,a.O5,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.Q7,c.c5,c.On,c.F,H.g1,a.JJ]});var tt=s(7185),T=s(1208),q=s(1894);function et(n,o){if(1&n){const e=t.EpF();t.ynx(0),t._UZ(1,"img",7),t.TgZ(2,"button",8),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onUpload())}),t._uU(3,"Upload Image"),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("src",e.croppedImage,t.LSH)}}class P{constructor(){this.addFile=new t.vpe,this.files=[],this.imageChangedEvent="",this.croppedImage=""}ngOnInit(){}fileChangeEvent(o){this.imageChangedEvent=o}imageCropped(o){this.croppedImage=o.base64}onSelect(o){this.files=[],this.files.push(...o.addedFiles),this.fileChangeEvent(this.files[0])}onUpload(){console.log((0,T.Ll)(this.croppedImage)),this.addFile.emit((0,T.Ll)(this.croppedImage))}}function ot(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",8),t._UZ(2,"img",9),t.TgZ(3,"div",10)(4,"button",11),t.NdJ("click",function(){const d=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.setMainPhoto(d.id))}),t._uU(5,"Set Main "),t.qZA(),t.TgZ(6,"button",12),t.NdJ("click",function(){const d=t.CHM(e).$implicit,p=t.oxw(2);return t.KtG(p.deletePhoto(d.id))}),t._UZ(7,"i",13),t.qZA()()()()}if(2&n){const e=o.$implicit;t.xp6(2),t.s9C("src",e.pictureUrl,t.LSH),t.s9C("alt",e.fileName),t.xp6(2),t.Tol(e.isMain?"btn btn-success":"btn btn-outline-success"),t.Q6J("disabled",e.isMain),t.xp6(2),t.Q6J("disabled",e.isMain)}}function nt(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"h3"),t._uU(3,"Product Photos"),t.qZA(),t.TgZ(4,"button",4),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.addPhotoModeToggle())}),t._uU(5," Add New Photo "),t.qZA()(),t.TgZ(6,"div",5),t.YNc(7,ot,8,7,"div",6),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(7),t.Q6J("ngForOf",null==e.product?null:e.product.photos)}}function it(n,o){if(1&n&&(t.TgZ(0,"div",18)(1,"div",19),t._uU(2),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.Udp("width",e.progress,"%"),t.xp6(1),t.hij(" ",e.progress,"% ")}}function rt(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"h3",14),t._uU(3,"Add new product image"),t.qZA(),t.TgZ(4,"button",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.addPhotoModeToggle())}),t._uU(5,"Cancel"),t.qZA()(),t.YNc(6,it,3,3,"div",16),t.TgZ(7,"app-photo-widget",17),t.NdJ("addFile",function(r){t.CHM(e);const d=t.oxw();return t.KtG(d.uploadFile(r))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(6),t.Q6J("ngIf",e.progress>0)}}P.\u0275fac=function(o){return new(o||P)},P.\u0275cmp=t.Xpm({type:P,selectors:[["app-photo-widget"]],outputs:{addFile:"addFile"},decls:17,vars:5,consts:[[1,"row"],[1,"col-4"],["ngx-dropzone","",1,"custom-dropzone",3,"change"],[1,"fa","fa-upload","fa-4x"],[1,"col-4","img-preview"],["format","png",1,"img-fluid",3,"imageChangedEvent","imageFile","maintainAspectRatio","aspectRatio","imageCropped"],[4,"ngIf"],[1,"img-fluid",3,"src"],[1,"btn-block","btn-primary",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3,"Step 1 - Add Photo"),t.qZA(),t.TgZ(4,"div",2),t.NdJ("change",function(r){return e.onSelect(r)}),t.TgZ(5,"ngx-dropzone-label"),t._UZ(6,"i",3),t.TgZ(7,"h4"),t._uU(8,"Drop image here"),t.qZA()()()(),t.TgZ(9,"div",4)(10,"h3"),t._uU(11,"Step 2 - Resize image"),t.qZA(),t.TgZ(12,"image-cropper",5),t.NdJ("imageCropped",function(r){return e.imageCropped(r)}),t.qZA()(),t.TgZ(13,"div",1)(14,"h3"),t._uU(15,"Step 3 - Preview & Upload"),t.qZA(),t.YNc(16,et,4,1,"ng-container",6),t.qZA()()),2&o&&(t.xp6(12),t.Q6J("imageChangedEvent",e.imageChangedEvent)("imageFile",e.files[0])("maintainAspectRatio",!0)("aspectRatio",1),t.xp6(4),t.Q6J("ngIf",e.croppedImage))},dependencies:[a.O5,q._f,q.NP,T.ap],styles:[".custom-dropzone[_ngcontent-%COMP%]{border:3px dashed #eee;border-radius:5px;padding-top:30px;text-align:center;height:200px}.custom-dropzone.ngx-dz-hovered[_ngcontent-%COMP%]{border:3px solid green}"]});class b{constructor(o,e){this.adminService=o,this.toast=e,this.progress=0,this.addPhotoMode=!1}ngOnInit(){}addPhotoModeToggle(){this.addPhotoMode=!this.addPhotoMode}uploadFile(o){this.adminService.uploadImage(o,this.product.id).subscribe(e=>{switch(e.type){case Z.dt.UploadProgress:this.progress=Math.round(e.loaded/e.total*100);break;case Z.dt.Response:this.product=e.body,setTimeout(()=>{this.progress=0,this.addPhotoMode=!1},1500)}},e=>{this.toast.error(e.errors?e.errors[0]:"Problem uploading image"),this.progress=0})}deletePhoto(o){this.adminService.deleteProductPhoto(o,this.product.id).subscribe(()=>{const e=this.product.photos.findIndex(i=>i.id===o);this.product.photos.splice(e,1)},e=>{this.toast.error("Problem deleting photo"),console.log(e)})}setMainPhoto(o){this.adminService.setMainPhoto(o,this.product.id).subscribe(e=>{this.product=e},e=>{this.toast.error("Problem set photo"),console.log(e)})}}b.\u0275fac=function(o){return new(o||b)(t.Y36(u),t.Y36(tt._W))},b.\u0275cmp=t.Xpm({type:b,selectors:[["app-edit-product-photos"]],inputs:{product:"product"},decls:4,vars:2,consts:[[1,"py-5"],[1,"container"],[4,"ngIf"],[1,"d-flex","justify-content-between","mb-3"],[1,"btn","btn-primary",3,"click"],[1,"row"],["class","col-3",4,"ngFor","ngForOf"],[1,"col-3"],[1,"card"],["width","100%","height","225",1,"card-img-top",3,"src","alt"],[1,"btn-group",2,"width","100%"],["type","button",2,"width","50%",3,"disabled","click"],["type","button",1,"btn","btn-outline-danger",2,"width","50%",3,"disabled","click"],[1,"fa","fa-trash"],[1,"text-primary"],[1,"btn","btn-outline-secondary",3,"click"],["class","progress form-group",4,"ngIf"],[3,"addFile"],[1,"progress","form-group"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,nt,8,1,"ng-container",2),t.YNc(3,rt,8,1,"ng-container",2),t.qZA()()),2&o&&(t.xp6(2),t.Q6J("ngIf",!e.addPhotoMode),t.xp6(1),t.Q6J("ngIf",e.addPhotoMode))},dependencies:[a.sg,a.O5,P]});class l{constructor(o,e,i,r){this.adminService=o,this.shopService=e,this.route=i,this.router=r,this.productFormValues=new k}ngOnInit(){const o=this.getBrands(),e=this.getTypes();(0,B.D)([e,o]).subscribe(i=>{this.types=i[0],this.brands=i[1]},i=>{console.log(i)},()=>{"edit"===this.route.snapshot.url[0].path&&this.loadProduct()})}updatePrice(o){this.product.price=o}loadProduct(){const o=this.route.snapshot.paramMap.get("id");o&&this.shopService.getProduct(+o).subscribe(e=>{const i=this.brands&&this.brands.find(d=>d.name===e.productBrand).id,r=this.types&&this.types.find(d=>d.name===e.productType).id;this.product=e,this.productFormValues={...e,productBrandId:i,productTypeId:r}})}getBrands(){return this.shopService.getBrands()}getTypes(){return this.shopService.getTypes()}onSubmit(o){if("edit"===this.route.snapshot.url[0].path){const e={...this.product,...o,price:+o.price};this.adminService.updateProduct(e,+this.route.snapshot.paramMap.get("id")).subscribe(i=>{this.router.navigate(["/admin"])})}else{const e={...o,price:+o.price};this.adminService.createProduct(e).subscribe(i=>{this.router.navigate(["/admin"])})}}}l.\u0275fac=function(o){return new(o||l)(t.Y36(u),t.Y36(y.d),t.Y36(g.gz),t.Y36(g.F0))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-edit-product"]],decls:11,vars:4,consts:[[1,"product-edit","mt-5"],[1,"container"],[1,"row"],[1,"col-12"],[1,"tab-panel"],[1,"product-tabset"],["heading","Edit Product"],[1,"col-lg-8"],[3,"product","brands","types"],["heading","Edit Photos"],[3,"product"]],template:function(o,e){1&o&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"tabset",5)(6,"tab",6)(7,"div",7),t._UZ(8,"app-edit-product-form",8),t.qZA()(),t.TgZ(9,"tab",9),t._UZ(10,"app-edit-product-photos",10),t.qZA()()()()()()()),2&o&&(t.xp6(8),t.Q6J("product",e.productFormValues)("brands",e.brands)("types",e.types),t.xp6(2),t.Q6J("product",e.product))},dependencies:[M.wW,M.AH,C,b]});const dt=[{path:"",component:v},{path:"create",component:l,data:{breadcrumb:"Create"}},{path:"edit/:id",component:l,data:{breadcrumb:"Edit"}}];class m{}m.\u0275fac=function(o){return new(o||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[g.Bz.forChild(dt),g.Bz]});class h{}h.\u0275fac=function(o){return new(o||h)},h.\u0275mod=t.oAB({type:h}),h.\u0275inj=t.cJS({imports:[a.ez,F.m,m]})}}]);